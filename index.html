<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT" xml:lang="it-IT">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Maurizio Tomasi" />
  <title>Lezioni del corso di TNDS</title>
  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/skylighting-solarized-theme.css" />
  <script defer="" src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <script src="./fmtinstall.js"></script>
</head>
<body>

<header>
<h1 class="title">Lezioni del corso di TNDS</h1>
<blockquote class="metadata">
<p class="author">
      Maurizio Tomasi
  </p>
<p class="date before-toc"><time datetime="A.A. 2024−2025">A.A. 2024−2025</time></p>
</blockquote>
</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#esercizi-e-spiegazioni" id="toc-esercizi-e-spiegazioni">Esercizi e spiegazioni</a></li>
  <li><a href="#temi-desame-svolti" id="toc-temi-desame-svolti">Temi d’esame svolti</a></li>
  <li><a href="#esamescritto" id="toc-esamescritto">Come prepararsi all’esame scritto</a></li>
  <li><a href="#suggerimenti-vari" id="toc-suggerimenti-vari">Suggerimenti vari</a>
  <ul>
  <li><a href="#gcc" id="toc-gcc">Configurazione del compilatore</a></li>
  <li><a href="#rootgnuplot" id="toc-rootgnuplot">Installazione di ROOT e Gnuplot</a></li>
  <li><a href="#fmtinstall" id="toc-fmtinstall">Uso della libreria <code>fmt</code></a></li>
  <li><a href="#gplotinstall" id="toc-gplotinstall">Gplot++</a></li>
  <li><a href="#rootvscode" id="toc-rootvscode">ROOT e Visual Studio Code</a></li>
  </ul></li>
  </ul>
</nav>

<main>
<h1 id="esercizi-e-spiegazioni">Esercizi e spiegazioni</h1>
<center>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 42%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="header">
<th>Data</th>
<th>Esercizi</th>
<th>Spiegazione</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>24 Settembre 2024</td>
<td><a href="carminati-esercizi-01.html">Arrays</a></td>
<td><a href="tomasi-lezione-01.html">Lezione 1</a></td>
</tr>
</tbody>
</table>
<!--
| 3 Ottobre 2024    | [Classe `Vettore`](carminati-esercizi-02.html)                  | [Lezione 2](tomasi-lezione-02.html)                                 |
| 10 Ottobre 2024   | [Template e `vector`](carminati-esercizi-03.html)               | [Lezione 3](tomasi-lezione-03.html)                                 |
| 17 Ottobre 2024   | [Esercizi facoltativi](carminati-esercizi-04.html)              |                                                                     |
| 24 Ottobre 2024   | [Classi ed ereditarietà](carminati-esercizi-05.html)            | [Lezione 5](tomasi-lezione-05.html)                                 |
| 31 Ottobre 2024   | [Ricerca di zeri](carminati-esercizi-06.html)                   | [Lezione 6](tomasi-lezione-06.html)                                 |
| 7 Novembre 2024   | [Quadratura numerica](carminati-esercizi-07.html)               | [Notebook 7](https://ziotom78.github.io/tnds-notebooks/lezione07/)  |
| 14 Novembre 2024  | [Equazioni differenziali](carminati-esercizi-08.html)           | [Notebook 8](https://ziotom78.github.io/tnds-notebooks/lezione08/), [slides](tomasi-lezione-08.html) |
| 20 Novembre 2024  | Idem                                                            | [Esempio svolto](2024-11-21 Equazioni differenziali Tomasi.pdf)     |
| 28 Novembre 2024  | [Numeri pseudo-casuali e integrali](carminati-esercizi-10.html) | [Notebook 10](https://ziotom78.github.io/tnds-notebooks/lezione10/) |
| 5 Dicembre 2024   | Idem                                                            | Idem                                                                |
| 12 Dicembre 2024  | [Metodi Monte Carlo](carminati-esercizi-12.html)                | [Notebook 10](https://ziotom78.github.io/tnds-notebooks/lezione10/) |
-->
</center>
<!--
Link al Google Form per il [seminario su C++, Python e Julia](tomasi-lezione-08.html#/seminario-su-c-python-e-julia): <https://forms.gle/ZaDv5n6PjDEaNRoT8>. [Slides](tomasi-c++-python-julia.html).
-->
<h1 id="temi-desame-svolti">Temi d’esame svolti</h1>
<p>Carminati ha pubblicato sul sito del corso una serie di temi d’esame: <a href="https://labtnds.docs.cern.ch/ProveEsame/TemiEsame/" class="uri">https://labtnds.docs.cern.ch/ProveEsame/TemiEsame/</a>. Su questo sito ho pubblicato una traccia di soluzione per ciascuno di essi, con una serie di commenti: <a href="temi-svolti.html">temi-svolti.html</a>.</p>
<h1 id="esamescritto">Come prepararsi all’esame scritto</h1>
<p>Di seguito un piccolo vademecum per aiutarvi a svolgere nel migliore dei modi l’esame scritto.</p>
<ol>
<li><p>Potete mettere in pratica questo vademecum esercitandovi con i cinque temi pubblicati da Carminati a questo link: <a href="https://labtnds.docs.cern.ch/ProveEsame/TemiEsame/" class="uri">https://labtnds.docs.cern.ch/ProveEsame/TemiEsame/</a>. Una spiegazione di come affrontarli è disponibile in una <a href="temi-svolti.html">pagina dedicata</a>.</p></li>
<li><p>Dovete sapere <strong>molto bene</strong> la teoria per affrontare lo scritto, perché c’è sempre almeno una domanda la cui risposta è banalissima se si conoscono le equazioni che giustificano un metodo, quasi impossibile se non le si sanno. (Esempio: un problema potrebbe chiedere di determinare l’errore atteso da un integrale col metodo di Simpson, ma voi non sapete il valore vero. Nelle lezioni teoriche però si spiega qual è la relazione tra il passo <span class="math inline">h</span> del metodo di Simpson e l’errore atteso, e si fornisce pure una formula matematica per stimare l’errore senza sapere il valore esatto dell’integrale).</p></li>
<li><p>Curate benissimo gli esercizi, ed arrivate il giorno dello scritto con un archivio ordinato di tutti i file che vi serviranno. Vi raccomando di mettere tutto il codice in file <code>.h</code> evitando i file <code>.cpp</code>. Se quindi avete implementato una classe in questo modo:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// File RandomGen.h</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#pragma once</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RandomGen <span class="op">{</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  RandomGen<span class="op">::</span>RandomGen<span class="op">(</span><span class="dt">int</span> seed<span class="op">);</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Etc.</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">// File RandomGen.cpp</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;RandomGen.h&quot;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>RandomGen<span class="op">::</span>RandomGen<span class="op">(</span><span class="dt">int</span> seed<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Implementation…</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>sarebbe meglio levare di mezzo il file <code>RandomGen.cpp</code> e avere tutto nel file <code>RandomGen.h</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">// File RandomGen.h</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#pragma once</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> RandomGen <span class="op">{</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  RandomGen<span class="op">::</span>RandomGen<span class="op">(</span><span class="dt">int</span> seed<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Here comes the implementation that was originally in RandomGen.cpp</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Etc.</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<p>Avere solo i file <code>.h</code> vi dà un grande vantaggio: non dovete complicare troppo il <code>Makefile</code> che scriverete durante il compito, perché basta includere i file <code>.h</code> che vi servono nel <code>main.cpp</code> e siete a posto. (Questo è esattamente quanto ho fatto nel file <code>gplot++.hpp</code>, che infatti non richiede modifiche al <code>Makefile</code> per essere usato).</p></li>
<li><p>Leggete con attenzione il testo, e annotate a margine (o su un foglio di brutta) le cose che sono esplicitamente richieste e quali no. Capita che gli studenti si incaponiscano a produrre un grafico fatto in un certo modo, quando il testo richiedeva semplicemente di “tabulare i risultati” (ossia, stamparli semplicemente a video!)</p></li>
<li><p>Prima di iniziare a scrivere codice come forsennati, provate a stimare almeno l’ordine di grandezza delle risposte. Alcuni esempi pratici:</p>
<ul>
<li><p>Se si fornisce una funzione e si chiedono gli zeri, fate un grafico con Gnuplot o con Excel per stimarli grossolanamente;</p></li>
<li><p>Se si deve fare una simulazione di un esperimento per stimare l’errore su un certo parametro, provate a fare una semplice propagazione degli errori (se i conti non risultano troppo complicati!);</p></li>
<li><p>Se si devono generare numeri casuali con una specifica distribuzione, implementate come prima cosa nel <code>main</code> un codice per estrarre ~10 000 numeri e fatene un istogramma: la sua forma corrisponde alla distribuzione fornita?</p></li>
<li><p>Etc.</p></li>
</ul>
<p>Non spendete però troppo tempo per arrivare a una stima con carta e penna: se dopo dieci minuti di lavoro siete ancora in alto mare, lasciate perdere!</p></li>
<li><p>Leggete <em>tutto</em> il testo dell’esame prima di iniziare a scrivere il codice. Magari nel primo punto vi viene chiesto di assumere una certa quantità fisica (una massa, una velocità…) come costante, ma in uno dei punti successivi dovete cambiarne il valore oppure addirittura trasformarla in una quantità che dipende dal tempo o dallo spazio. Se leggete prima tutto il testo, potete già fare caso a queste cose e progettare la struttura del codice in maniera più efficace.</p></li>
<li><p>I temi di esame sono solitamente espressi come una lista di punti, ciascuno dei quali è una domanda. <strong>MAI</strong> implementare tutto il codice, da cima a fondo, che risolve tutti i punti e solo alla fine eseguirlo! Implementate il codice che vi serve per risolvere il primo punto, stampatelo, verificate i risultati, e quando vi convince passate al secondo. In questo modo, se i numeri prodotti per il primo punto appaiono strani, potete correggere gli errori prima di passare al punto successivo. Altrimenti rischiate di dover buttare via tutto il lavoro: magari vi rendete conto che per risolvere bene il primo punto avevate bisogno di <em>due</em> variabili <code>std::vector</code> anziché una sola, e di conseguenza quanto avete implementato per i punti successivi non è più valido.</p></li>
<li><p>Non succederà mai che viene richiesto l’uso di ROOT o di Gnuplot esplicitamente; fare però i grafici è utile per avere l’intuizione se i risultati che il vostro codice produce sono sensati oppure no.</p></li>
<li><p>Prima di fare i grafici, preoccupatevi <strong>sempre</strong> di stampare con <code>cout</code> o con <code>fmt::println</code> i valori tabulati delle quantità che andate a mettere nei grafici. Noi docenti siamo sempre disposti a chiudere un occhio se un grafico risulta sbagliato o vuoto, però i valori che il programma stampa a video sono corretti: vuol dire che avete semplicemente sbagliato a creare il grafico, e questo è un errore assolutamente perdonabile.</p>
<p>Nel caso di simulazioni Monte Carlo, i numeri da stampare sono sempre moltissimi, quindi stampatene giusto qualcuno:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="at">const</span> <span class="dt">int</span> num_of_simulations <span class="op">=</span> <span class="dv">10&#39;000</span><span class="op">;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;</span> results<span class="op">{</span>num_of_simulations<span class="op">};</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">{};</span> i <span class="op">&lt;</span> num_of_simulations<span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  results<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> run_simulation<span class="op">();</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Stampo i primi 5 valori calcolati a video, giusto come controllo</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span><span class="op">(</span>i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;</span><span class="sc">{}\t{}</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> results<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>Capita spesso che venga richiesto di ripetere un’analisi più volte. Ad esempio, si deve calcolare un integrale col metodo di Simpson usando un numero di step via via crescente, o si deve risolvere un’equazione differenziale variando il numero di passi, etc.</p>
<p>Alcuni studenti, presi dal “panico dell’esame”, lavorano di copia-e-incolla: risolvono il problema nel primo caso, poi copiano e incollano lo stesso codice nel <code>main</code> tante volte quante sono i casi da studiare, e aggiustano a mano quei parametri che vanno aggiornati. Ecco un esempio:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Il tema d&#39;esame richiede di simulare un esperimento N volte</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// e stimare l&#39;errore su un certo parametro A, e chiede di</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// vedere come l&#39;errore su A cambia al variare di N. Il testo</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// chiede di far assumere a N i valori { 100, 500, 1000, 5000 }.</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> risultato<span class="op">{};</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Codice per N = 100</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">{};</span> i <span class="op">&lt;</span> <span class="dv">100</span><span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Qui aggiorno la variabile `risultato`</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Risultato per N = 100: </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato<span class="op">);</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Codice per N = 500, copiato da sopra</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">{};</span> i <span class="op">&lt;</span> <span class="dv">500</span><span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Qui aggiorno la variabile `risultato`</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Risultato per N = 500: </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato<span class="op">);</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Codice per N = 1000, copiato da sopra</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">{};</span> i <span class="op">&lt;</span> <span class="dv">1000</span><span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Qui aggiorno la variabile `risultato`</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Risultato per N = 1000: </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato<span class="op">);</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Codice per N = 5000, copiato da sopra</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">{};</span> i <span class="op">&lt;</span> <span class="dv">1000</span><span class="op">;</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Qui aggiorno la variabile `risultato`</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Risultato per N = 5000: </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato<span class="op">);</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Questo porta ad alcuni problemi gravi:</p>
<ul>
<li><p>Se vi accorgete solo dopo aver fatto copia-e-incolla che c’era un errore nel caso con <code>N = 100</code>, lo dovrete correggere per tutti gli altri casi. Questo vi farà sprecare molto tempo, che in un esame è una risorsa preziosa;</p></li>
<li><p>In ognuna delle copie del codice che avete incollato bisogna ovviamente cambiare qualcosa qua e là; è facile che ci sia almeno una di quelle copie in cui modificate la riga sbagliata, oppure non la modificate del tutto. (È il caso dell’esempio sopra: ve ne eravate accorti?)</p></li>
</ul>
<p>La cosa migliore da fare è quella di spostare il codice che va ripetuto all’interno di una funzione, e poi chiamarla più volte nel <code>main</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calcola_risultato<span class="op">(</span><span class="dt">int</span> N<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Qui va tutta l&#39;implementazione del calcolo</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">std::</span>vector<span class="op">&lt;</span><span class="dt">int</span><span class="op">&gt;</span> list_of_N<span class="op">{</span><span class="dv">100</span><span class="op">,</span> <span class="dv">500</span><span class="op">,</span> <span class="dv">1000</span><span class="op">,</span> <span class="dv">5000</span><span class="op">};</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span><span class="op">(</span><span class="dt">int</span> i<span class="op">{};</span> i <span class="op">&lt;</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span> list_of_N<span class="op">.</span>size<span class="op">();</span> <span class="op">++</span>i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ricordate di usare list_of_N.at(i) anziché list_of_N[i],</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// perché così il compilatore controlla che il valore di `i`</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// non esca dai limiti del vettore</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> cur_N<span class="op">{</span>list_of_N<span class="op">.</span>at<span class="op">(</span>i<span class="op">)};</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> risultato<span class="op">{</span>calcola_risultato<span class="op">(</span>cur_N<span class="op">)};</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Risultato per N = </span><span class="sc">{}</span><span class="st">: </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> cur_N<span class="op">,</span> risultato<span class="op">);</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Per fare un esempio un po’ più complicato, immaginiamo che vi venga chiesto di fare la simulazione di un esperimento dati tre parametri <span class="math inline">A</span>, <span class="math inline">B</span> e <span class="math inline">C</span>, e che l’esercizio si articoli in tre punti:</p>
<ul>
<li><p>Prima dovete calcolare il risultato dell’esperimento supponendo che il parametro <span class="math inline">A</span> sia affetto da errore, mentre altre due quantità <span class="math inline">B</span> e <span class="math inline">C</span> usate nella simulazione non hanno errore;</p></li>
<li><p>Poi dovete invece supporre che sia <span class="math inline">B</span> affetto da errore, ma non <span class="math inline">A</span> e <span class="math inline">C</span>;</p></li>
<li><p>Infine dovete supporre che solo <span class="math inline">C</span> sia affetto da un errore.</p></li>
</ul>
<p>Si possono inventare soluzioni sofisticate che impieghino un <code>std::vector</code> per seguire l’idea della variabile <code>list_of_N</code> nell’esempio precedente, ma nel caso di uno scritto (in cui il tempo è limitato) è meglio non stare a lambiccarsi troppo… Il codice seguente va più che bene:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calcola_risultato<span class="op">(</span><span class="dt">double</span> A<span class="op">,</span> <span class="dt">double</span> err_A<span class="op">,</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                         <span class="dt">double</span> B<span class="op">,</span> <span class="dt">double</span> err_B<span class="op">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                         <span class="dt">double</span> C<span class="op">,</span> <span class="dt">double</span> err_C<span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Qui va tutta l&#39;implementazione della logica, che può essere lunga!</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Questi sono i parametri dell&#39;esperimento, che immaginiamo siano</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// forniti nel testo dell&#39;esercizio</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> A_rif<span class="op">{</span><span class="fl">1.0</span><span class="op">};</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> B_rif<span class="op">{</span><span class="fl">2.0</span><span class="op">};</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> C_rif<span class="op">{</span><span class="fl">3.0</span><span class="op">};</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> err_A_rif<span class="op">{</span><span class="fl">0.03</span><span class="op">};</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> err_B_rif<span class="op">{</span><span class="fl">0.05</span><span class="op">};</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> err_C_rif<span class="op">{</span><span class="fl">0.02</span><span class="op">};</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Soluzione del primo punto: introduco solo un errore su A</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> risultato1<span class="op">{</span>calcola_risultato<span class="op">(</span>A_rif<span class="op">,</span> err_A_rif<span class="op">,</span> B_rif<span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> C_rif<span class="op">,</span> <span class="fl">0.0</span><span class="op">)};</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Soluzione del secondo punto: introduco solo un errore su B</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> risultato2<span class="op">{</span>calcola_risultato<span class="op">(</span>A_rif<span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> B_rif<span class="op">,</span> err_B_rif<span class="op">,</span> C_rif<span class="op">,</span> <span class="fl">0.0</span><span class="op">)};</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Soluzione del terzo punto: introduco solo un errore su C</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> risultato3<span class="op">{</span>calcola_risultato<span class="op">(</span>A_rif<span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> B_rif<span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> C_rif<span class="op">,</span> err_C_rif<span class="op">)};</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Stampo i risultati</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Punto 1 (errore solo su A): </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato1<span class="op">);</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Punto 2 (errore solo su B): </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato2<span class="op">);</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  fmt<span class="op">::</span>println<span class="op">(</span><span class="st">&quot;Punto 3 (errore solo su C): </span><span class="sc">{}</span><span class="st">&quot;</span><span class="op">,</span> risultato3<span class="op">);</span></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
<li><p>Prima di consegnare lo scritto, rimettete a posto la formattazione. Se usate Replit, è sufficiente premere Ctrl+S dopo aver modificato ciascun file. Altrimenti, dal terminale eseguite questo comando, che è molto più rapido:</p>
<pre><code>clang-format -i *.cpp *.h</code></pre>
<p>per sistemare le indentazioni e i rientri di tutti i file <code>*.h</code> e <code>*.cpp</code> presenti nella cartella. Questo vi farà fare un figurone! (Sarebbe stata un’ottima cosa fare lo stesso anche per gli esercizi che avete consegnato. Ma se state leggendo queste righe per la prima volta solo il giorno dello scritto, ahimè è troppo tardi…)</p></li>
</ol>
<h1 id="suggerimenti-vari">Suggerimenti vari</h1>
<h2 id="gcc">Configurazione del compilatore</h2>
<p>Per fare in modo di usare l’ultima versione disponibile del compilatore GCC, digitate questo comando:</p>
<pre><code>/home/comune/labTNDS_programmi/enable-latest-gcc</code></pre>
<p>Dopodiché chiudete il terminale e riapritelo. Verificate che ora il comando <code>g++</code> usi la versione 13 del compilatore:</p>
<pre><code>$ g++ --version
g++ (GCC) 13.2.1 20231205 (Red Hat 13.2.1-6)
Copyright (C) 2023 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</code></pre>
<p>È sufficiente eseguire il programma <code>enable-latest-gcc</code> <strong>una volta sola</strong>, perché poi la configurazione resta salvata.</p>
<h2 id="rootgnuplot">Installazione di ROOT e Gnuplot</h2>
<p>A partire dal Gennaio 2022, Repl.it non fornisce più una serie di programmi nelle proprie Repl, e purtroppo tra i programmi rimossi c’è anche Gnuplot. I docenti hanno provveduto ad installare sia ROOT che Gnuplot in ciascuno dei template usati per gli esercizi, ma questo non avviene se volete creare voi Repl aggiuntive.</p>
<p>Se avete creato una Repl per conto vostro e volete configurarla esattamente come quelle usate a lezione, eseguite questo comando dalla console della nuova Repl:</p>
<p>
<input type="text" value="curl -s https://ziotom78.github.io/tnds-tomasi-notebooks/install_standard_packages | sh" id="installStdPackages" readonly="1" size="60"><button onclick='copyFmtInstallationScript("installStdPackages")'>Copia</button>
</p>
<p>Una volta eseguito, ROOT e Gnuplot, più altri utili programmi, saranno installati ed operativi.</p>
<h2 id="fmtinstall">Uso della libreria <code>fmt</code></h2>
<p>Siete invitati ad impratichirvi con la libreria <a href="https://github.com/fmtlib/fmt">fmt</a>, che potete installare usando lo script <a href="./install_fmt_library"><code>install_fmt_library</code></a>: si esegue con il comando <code>sh install_fmt_library</code>, e il comando <strong>va eseguito nella directory in cui avete i vostri codici!</strong>.</p>
<p>Lo script <code>install_fmt_library</code> è già fornito nei template degli esercizi forniti per il turno T2, ma potete installarlo anche in altre Repl con questo comando:</p>
<p>
<input type="text" value="curl https://ziotom78.github.io/tnds-tomasi-notebooks/install_fmt_library | sh" id="installFmt" readonly="1" size="60"><button onclick='copyFmtInstallationScript("installFmt")'>Copia</button>
</p>
<p><strong>Importante</strong>: Il comando va dato all’interno della directory in cui codificate l’esercizio. Ciò significa che <strong>ciascuna</strong> delle directory che contiene un esercizio per cui è necessario usare <code>fmt</code> deve contenere una copia della libreria. Non preoccupatevi di sprecare spazio, perché la libreria <code>fmt</code> occupa pochi centinaia di KB.</p>
<p>Se non avete il comando <code>curl</code> o state usando Windows, scaricate questo <a href="./fmtlib.zip">file zip</a> nella directory di ciascun esercizio in cui prevedete di usare <code>fmt</code> e decomprimetelo.</p>
<p>Questo è un esempio che mostra come installare ed usare la libreria:</p>
<center>
<script id="asciicast-FolwvNAVKQTqGXQs4grz4qjFk" src="https://asciinema.org/a/FolwvNAVKQTqGXQs4grz4qjFk.js" async></script>
</center>
<h2 id="gplotinstall">Gplot++</h2>
<p>Se avete difficoltà ad usare ROOT, potete interfacciare il vostro codice a <a href="http://www.gnuplot.info/">Gnuplot</a> mediante la libreria <a href="https://github.com/ziotom78/gplotpp">gplot++</a>: è sufficiente scaricare il file <a href="https://raw.githubusercontent.com/ziotom78/gplotpp/master/gplot%2B%2B.h"><code>gplot++.h</code></a>, oppure eseguire questo comando:</p>
<p>
<input type="text" value="curl 'https://raw.githubusercontent.com/ziotom78/gplotpp/master/gplot%2B%2B.h' > gplot++.h" id="installGplot" readonly="1" size="60"><button onclick='copyFmtInstallationScript("installGplot")'>Copia</button>
</p>
<p>Ricordate che la libreria funziona a patto che abbiate installato Gnuplot sul vostro computer.</p>
<h2 id="rootvscode">ROOT e Visual Studio Code</h2>
<p>(Suggerimento di Matteo Bettoni) Di default, Visual Studio Code non riconosce le librerie di ROOT e segnala quindi errore quando incontra istruzioni come</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;TGraph.h&quot;</span></span></code></pre></div>
<p>Un modo per togliere queste segnalazioni di errore è quello di aprire il menu “Impostazioni”, e scegliere la voce “Estensioni”/“C/C++”/“Intellisense” e selezionare “Default: Include Path”. Premere il bottone “Aggiungi elemento”, ed inserire nella casella di testo il contenuto dell’output del comando</p>
<pre><code>root-config --incdir</code></pre>
<p><img src="images/root-vscode-config.png" /></p>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
